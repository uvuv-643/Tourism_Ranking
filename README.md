# Поиск туристических мест Росии

## Деплоймент

Для корректной работы обязательно наличие домена для API
и основного сайта с указанием DNS записей для текущего сервера.
Указать домен можно в docker-compose сервисе `certbot`.

```shell
sudo chmod 777 init.sh
./init.sh
cp .env.example .env
cp fastapi/.env.example fastapi/.env
docker-compose up -d
```

## Тестовое API -- спецификация

### `POST` https://uvuv643.ru/test/photo
Входные данные:

Города: 0 - все города, 1 - Нижний Новгород, 2 - Ярославль, 3 - Екатеринбург, 4 - Владимир 

```json
{
    "image": "data:image/webp;base64,UklGRrbpAABXRUJQVlA4IKrpAACQhgOdASp0A..."
    "city_id": 0
}
```

Выходные данные
```json
{
    "categories": [
        {
            "label": "интересные места",
            "prob": 0.17204301075268819
        },
    ],
    "objects": [
        {
            "point": {
                "lat": 56.327576,
                "lng": 43.997246
            },
            "city": "Нижний Новгород",
            "prob": 0.3851459324,
            "label": "Тайницкая башня",
            "categories": [
                [
                    "башни",
                    "архитектура",
                    "фортификационные сооружения",
                    "исторические",
                    "интересные места",
                    "другие башни",
                    "укрепленные башни"
                ]
            ],
            "xid": "R2906509",
            "photos": []
        }
    ]
}
```


### `POST` https://uvuv643.ru/test/text
Входные данные:

Города: 0 - все города, 1 - Нижний Новгород, 2 - Ярославль, 3 - Екатеринбург, 4 - Владимир 

```json
{
    "text": "кремль",
    "city_id": 1
}
```

Выходные данные
```json
{
    "objects": [
        {
            "point": {
                "lat": 56.327576,
                "lng": 43.997246
            },
            "city": "Нижний Новгород",
            "prob": 0.3851459324,
            "label": "Тайницкая башня",
            "categories": [
                [
                    "башни",
                    "архитектура",
                    "фортификационные сооружения",
                    "исторические",
                    "интересные места",
                    "другие башни",
                    "укрепленные башни"
                ]
            ],
            "xid": "R2906509",
            "photos": []
        }
    ]
}
```